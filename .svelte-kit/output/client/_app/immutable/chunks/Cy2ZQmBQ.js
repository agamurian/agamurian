import{A as on,k as bn,aT as en,t as N,l as R,_ as I,m as X,h as nn,Q as _n,o as xn,H as Cn,p as sn,v as L,C as F,$ as cn,aR as Tn,B as K,F as Sn,aU as O,aV as q,w as Pn,aE as an,ai as An,aw as pn,aP as un,ac as En,x as ln,z as Dn,aW as Rn,aX as Y,q as jn,y as rn,aY as Mn,a0 as kn,aZ as Fn,aO as Un,a_ as In,N as dn,a6 as $n,a$ as zn,aS as Nn,aM as On,s as k,f as Z,a8 as d,a9 as m,n as B}from"./LvNdeKyf.js";import{b as tn,d as qn,f as H,a as W}from"./C5vp_C0f.js";import"./BbaS0uwr.js";function ss(e,s){return s}function Bn(e,s,n){for(var u=e.items,l=[],g=s.length,t=0;t<g;t++)Fn(s[t].e,l,!0);var h=g>0&&l.length===0&&n!==null;if(h){var i=n.parentNode;Un(i),i.append(n),u.clear(),D(e,s[0].prev,s[g-1].next)}In(l,()=>{for(var b=0;b<g;b++){var c=s[b];h||(u.delete(c.k),D(e,c.prev,c.next)),rn(c.e,!h)}})}function as(e,s,n,u,l,g=null){var t=e,h={flags:s,items:new Map,first:null},i=(s&en)!==0;if(i){var b=e;t=R?N(I(b)):b.appendChild(on())}R&&X();var c=null,_=!1,x=new Map,A=_n(()=>{var w=n();return En(w)?w:w==null?[]:un(w)}),p,y;function o(){Hn(y,p,h,x,t,l,s,u,n),g!==null&&(p.length===0?c?ln(c):c=K(()=>g(t)):c!==null&&Dn(c,()=>{c=null}))}bn(()=>{y??=dn,p=nn(A);var w=p.length;if(_&&w===0)return;_=w===0;let v=!1;if(R){var P=xn(t)===Cn;P!==(w===0)&&(t=sn(),N(t),L(!1),v=!0)}if(R){for(var S=null,C,a=0;a<w;a++){if(F.nodeType===cn&&F.data===Tn){t=F,v=!0,L(!1);break}var r=p[a],T=u(r,a);C=Q(F,h,S,null,r,T,a,l,s,n),h.items.set(T,C),S=C}w>0&&N(sn())}if(R)w===0&&g&&(c=K(()=>g(t)));else if(Sn()){var j=new Set,$=Pn;for(a=0;a<w;a+=1){r=p[a],T=u(r,a);var M=h.items.get(T)??x.get(T);M?(s&(O|q))!==0&&mn(M,r,a,s):(C=Q(null,h,null,null,r,T,a,l,s,n,!0),x.set(T,C)),j.add(T)}for(const[E,z]of h.items)j.has(E)||$.skipped_effects.add(z.e);$.oncommit(o)}else o();v&&L(!0),nn(A)}),R&&(t=F)}function Hn(e,s,n,u,l,g,t,h,i){var b=(t&Mn)!==0,c=(t&(O|q))!==0,_=s.length,x=n.items,A=n.first,p=A,y,o=null,w,v=[],P=[],S,C,a,r;if(b)for(r=0;r<_;r+=1)S=s[r],C=h(S,r),a=x.get(C),a!==void 0&&(a.a?.measure(),(w??=new Set).add(a));for(r=0;r<_;r+=1){if(S=s[r],C=h(S,r),a=x.get(C),a===void 0){var T=u.get(C);if(T!==void 0){u.delete(C),x.set(C,T);var j=o?o.next:p;D(n,o,T),D(n,T,j),J(T,j,l),o=T}else{var $=p?p.e.nodes_start:l;o=Q($,n,o,o===null?n.first:o.next,S,C,r,g,t,i)}x.set(C,o),v=[],P=[],p=o.next;continue}if(c&&mn(a,S,r,t),(a.e.f&Y)!==0&&(ln(a.e),b&&(a.a?.unfix(),(w??=new Set).delete(a))),a!==p){if(y!==void 0&&y.has(a)){if(v.length<P.length){var M=P[0],E;o=M.prev;var z=v[0],V=v[v.length-1];for(E=0;E<v.length;E+=1)J(v[E],M,l);for(E=0;E<P.length;E+=1)y.delete(P[E]);D(n,z.prev,V.next),D(n,o,z),D(n,V,M),p=M,o=V,r-=1,v=[],P=[]}else y.delete(a),J(a,p,l),D(n,a.prev,a.next),D(n,a,o===null?n.first:o.next),D(n,o,a),o=a;continue}for(v=[],P=[];p!==null&&p.k!==C;)(p.e.f&Y)===0&&(y??=new Set).add(p),P.push(p),p=p.next;if(p===null)continue;a=p}v.push(a),o=a,p=a.next}if(p!==null||y!==void 0){for(var U=y===void 0?[]:un(y);p!==null;)(p.e.f&Y)===0&&U.push(p),p=p.next;var G=U.length;if(G>0){var vn=(t&en)!==0&&_===0?l:null;if(b){for(r=0;r<G;r+=1)U[r].a?.measure();for(r=0;r<G;r+=1)U[r].a?.fix()}Bn(n,U,vn)}}b&&jn(()=>{if(w!==void 0)for(a of w)a.a?.apply()}),e.first=n.first&&n.first.e,e.last=o&&o.e;for(var wn of u.values())rn(wn.e);u.clear()}function mn(e,s,n,u){(u&O)!==0&&an(e.v,s),(u&q)!==0?an(e.i,n):e.i=n}function Q(e,s,n,u,l,g,t,h,i,b,c){var _=(i&O)!==0,x=(i&Rn)===0,A=_?x?An(l,!1,!1):pn(l):l,p=(i&q)===0?t:pn(t),y={i:p,v:A,k:g,a:null,e:null,prev:n,next:u};try{if(e===null){var o=document.createDocumentFragment();o.append(e=on())}return y.e=K(()=>h(e,A,p,b),R),y.e.prev=n&&n.e,y.e.next=u&&u.e,n===null?c||(s.first=y):(n.next=y,n.e.next=y.e),u!==null&&(u.prev=y,u.e.prev=y.e),y}finally{}}function J(e,s,n){for(var u=e.next?e.next.e.nodes_start:n,l=s?s.e.nodes_start:n,g=e.e.nodes_start;g!==null&&g!==u;){var t=kn(g);l.before(g),g=t}}function D(e,s,n){s===null?e.first=n:(s.next=n,s.e.next=n&&n.e),n!==null&&(n.prev=s,n.e.prev=s&&s.e)}function f(e,s,n=!1,u=!1,l=!1){var g=e,t="";$n(()=>{var h=dn;if(t===(t=s()??"")){R&&X();return}if(h.nodes_start!==null&&(zn(h.nodes_start,h.nodes_end),h.nodes_start=h.nodes_end=null),t!==""){if(R){F.data;for(var i=X(),b=i;i!==null&&(i.nodeType!==cn||i.data!=="");)b=i,i=kn(i);if(i===null)throw Nn(),On;tn(F,b),g=N(i);return}var c=t+"";n?c=`<svg>${c}</svg>`:u&&(c=`<math>${c}</math>`);var _=qn(c);if((n||u)&&(_=I(_)),tn(I(_),_.lastChild),n||u)for(;I(_);)g.before(I(_));else g.before(_)}})}const fn={title:"Image Processing: From Theory to Practice",date:"2025-01-15",author:"Andrey Golovin",category:"graphics",tags:["image-processing","algorithms","python"],published:!0,featured:!0,excerpt:"Explore the fundamentals of digital image processing and how to apply convolutions, filters, and transformations to create stunning visual effects.",readingTime:12},{title:ps,date:ts,author:os,category:es,tags:cs,published:us,featured:ls,excerpt:is,readingTime:rs}=fn;var Wn=H('<h1 id="image-processing-from-theory-to-practice">Image Processing: From Theory to Practice</h1> <h2 id="introduction">Introduction</h2> <p>Digital image processing is one of the most exciting fields in computer science and graphics. Whether you’re building photo editing software, creating artistic effects, or developing computer vision systems, understanding image processing is essential.</p> <p>In this post, we’ll explore:</p> <ul><li>Fundamental concepts like pixels and color spaces</li> <li>Common filters and their applications</li> <li>Building your own image processor</li> <li>Real-world performance considerations</li></ul> <h2 id="part-1-understanding-pixels-and-color-spaces">Part 1: Understanding Pixels and Color Spaces</h2> <h3 id="rgb-and-beyond">RGB and Beyond</h3> <p>Every digital image is composed of pixels arranged in a 2D grid. Each pixel contains color information, most commonly in RGB (Red, Green, Blue) format.</p> <pre class="language-python"><!></pre> <h3 id="working-with-channels">Working with Channels</h3> <p>Each color channel can be manipulated independently:</p> <pre class="language-python"><!></pre> <h2 id="part-2-filters-and-convolutions">Part 2: Filters and Convolutions</h2> <h3 id="kernel-based-filtering">Kernel-Based Filtering</h3> <p>Convolution is the mathematical operation that powers most image filters. A kernel (small matrix) is slid across the image, computing weighted sums.</p> <p><strong>Common kernels:</strong></p> <pre class="language-python"><!></pre> <h3 id="applying-convolution">Applying Convolution</h3> <pre class="language-python"><!></pre> <h2 id="part-3-advanced-techniques">Part 3: Advanced Techniques</h2> <h3 id="histogram-equalization">Histogram Equalization</h3> <p>Improve contrast by redistributing pixel intensities:</p> <pre class="language-python"><!></pre> <h3 id="bilateral-filtering">Bilateral Filtering</h3> <p>Preserve edges while smoothing:</p> <pre class="language-python"><!></pre> <h2 id="part-4-performance-optimization">Part 4: Performance Optimization</h2> <h3 id="using-numpy-vectorization">Using NumPy Vectorization</h3> <pre class="language-python"><!></pre> <h3 id="gpu-acceleration-with-cupy">GPU Acceleration with CuPy</h3> <p>For large images or real-time processing:</p> <pre class="language-python"><!></pre> <h2 id="practical-example-creating-an-artistic-filter">Practical Example: Creating an Artistic Filter</h2> <pre class="language-python"><!></pre> <h2 id="conclusion">Conclusion</h2> <p>Image processing is a vast field with applications from medical imaging to artistic creation. The techniques covered here form the foundation for more advanced work. Experiment with different kernels, combine filters, and discover your own effects!</p> <h3 id="further-reading">Further Reading</h3> <ul><li>OpenCV (cv2) - Industry standard library</li> <li>scikit-image - Academic/scientific focus</li> <li>GIMP Plugin Development - Apply these concepts to a real application</li></ul> <hr/> <p><em>What image processing projects are you working on? Share in the comments!</em></p>',1);function Vn(e){var s=Wn(),n=k(Z(s),16),u=d(n);f(u,()=>`<code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># Load an image</span>
img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'example.jpg'</span><span class="token punctuation">)</span>
pixels <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>img<span class="token punctuation">)</span>

<span class="token comment"># pixels.shape gives us (height, width, 3) for RGB</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Image dimensions: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>pixels<span class="token punctuation">.</span>shape<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></code>`),m(n);var l=k(n,6),g=d(l);f(g,()=>`<code class="language-python"><span class="token comment"># Extract individual channels</span>
red_channel <span class="token operator">=</span> pixels<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
green_channel <span class="token operator">=</span> pixels<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
blue_channel <span class="token operator">=</span> pixels<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>

<span class="token comment"># Create a grayscale image</span>
grayscale <span class="token operator">=</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>pixels<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span></code>`),m(l);var t=k(l,10),h=d(t);f(h,()=>`<code class="language-python"><span class="token comment"># Blur kernel (3x3)</span>
blur_kernel <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">9</span>

<span class="token comment"># Sharpen kernel</span>
sharpen_kernel <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># Sobel edge detection (X direction)</span>
sobel_x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span></code>`),m(t);var i=k(t,4),b=d(i);f(b,()=>`<code class="language-python"><span class="token keyword">from</span> scipy <span class="token keyword">import</span> signal

<span class="token keyword">def</span> <span class="token function">apply_filter</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Apply a convolution filter to an image."""</span>
    filtered <span class="token operator">=</span> signal<span class="token punctuation">.</span>convolve2d<span class="token punctuation">(</span>
        image<span class="token punctuation">,</span>
        kernel<span class="token punctuation">,</span>
        mode<span class="token operator">=</span><span class="token string">'same'</span><span class="token punctuation">,</span>
        boundary<span class="token operator">=</span><span class="token string">'symm'</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> np<span class="token punctuation">.</span>clip<span class="token punctuation">(</span>filtered<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>

<span class="token comment"># Apply blur</span>
blurred <span class="token operator">=</span> apply_filter<span class="token punctuation">(</span>grayscale<span class="token punctuation">,</span> blur_kernel<span class="token punctuation">)</span>

<span class="token comment"># Apply edge detection</span>
edges <span class="token operator">=</span> apply_filter<span class="token punctuation">(</span>grayscale<span class="token punctuation">,</span> sobel_x<span class="token punctuation">)</span></code>`),m(i);var c=k(i,8),_=d(c);f(_,()=>`<code class="language-python"><span class="token keyword">def</span> <span class="token function">histogram_equalization</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Improve image contrast using histogram equalization."""</span>
    hist<span class="token punctuation">,</span> bins <span class="token operator">=</span> np<span class="token punctuation">.</span>histogram<span class="token punctuation">(</span>image<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    cdf <span class="token operator">=</span> hist<span class="token punctuation">.</span>cumsum<span class="token punctuation">(</span><span class="token punctuation">)</span>
    cdf_normalized <span class="token operator">=</span> cdf <span class="token operator">*</span> hist<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> cdf<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># Map old values to new values</span>
    cdf_m <span class="token operator">=</span> np<span class="token punctuation">.</span>ma<span class="token punctuation">.</span>masked_equal<span class="token punctuation">(</span>cdf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    cdf_m <span class="token operator">=</span> <span class="token punctuation">(</span>cdf_m <span class="token operator">-</span> cdf_m<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span> <span class="token operator">/</span> <span class="token punctuation">(</span>cdf_m<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> cdf_m<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    cdf <span class="token operator">=</span> np<span class="token punctuation">.</span>ma<span class="token punctuation">.</span>filled<span class="token punctuation">(</span>cdf_m<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'uint8'</span><span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> cdf<span class="token punctuation">[</span>image<span class="token punctuation">]</span></code>`),m(c);var x=k(c,6),A=d(x);f(A,()=>`<code class="language-python"><span class="token keyword">from</span> scipy<span class="token punctuation">.</span>ndimage <span class="token keyword">import</span> gaussian_filter

<span class="token keyword">def</span> <span class="token function">bilateral_filter</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> sigma_spatial<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">,</span> sigma_intensity<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Edge-preserving blur filter."""</span>
    h<span class="token punctuation">,</span> w <span class="token operator">=</span> image<span class="token punctuation">.</span>shape
    result <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>image<span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">)</span>
    
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># This is simplified; production code would optimize this</span>
            pixel_intensity <span class="token operator">=</span> image<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span>
            
            <span class="token comment"># Gaussian spatial weight</span>
            x_dist <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            y_dist <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> j<span class="token operator">+</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            <span class="token comment"># Apply weights...</span>
            
    <span class="token keyword">return</span> np<span class="token punctuation">.</span>clip<span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span></code>`),m(x);var p=k(x,6),y=d(p);f(y,()=>`<code class="language-python"><span class="token comment"># SLOW: Python loops</span>
slow_result <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>image<span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        slow_result<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span>

<span class="token comment"># FAST: NumPy vectorization</span>
fast_result <span class="token operator">=</span> image <span class="token operator">*</span> <span class="token number">2</span></code>`),m(p);var o=k(p,6),w=d(o);f(w,()=>`<code class="language-python"><span class="token keyword">import</span> cupy <span class="token keyword">as</span> cp

<span class="token keyword">def</span> <span class="token function">gpu_blur</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Fast blur using GPU."""</span>
    gpu_image <span class="token operator">=</span> cp<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>image<span class="token punctuation">)</span>
    kernel <span class="token operator">=</span> cp<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">9</span>
    result <span class="token operator">=</span> cp<span class="token punctuation">.</span>convolve<span class="token punctuation">(</span>gpu_image<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span>
    <span class="token keyword">return</span> cp<span class="token punctuation">.</span>asnumpy<span class="token punctuation">(</span>result<span class="token punctuation">)</span></code>`),m(o);var v=k(o,4),P=d(v);f(P,()=>`<code class="language-python"><span class="token keyword">def</span> <span class="token function">artistic_filter</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> blur_amount<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> edge_threshold<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Create a stylized artistic effect."""</span>
    <span class="token comment"># Step 1: Bilateral filter for smoothing</span>
    smoothed <span class="token operator">=</span> bilateral_filter<span class="token punctuation">(</span>image<span class="token punctuation">,</span> blur_amount<span class="token punctuation">)</span>
    
    <span class="token comment"># Step 2: Detect edges</span>
    edges <span class="token operator">=</span> apply_filter<span class="token punctuation">(</span>smoothed<span class="token punctuation">,</span> sobel_x<span class="token punctuation">)</span>
    
    <span class="token comment"># Step 3: Create mask where edges are strong</span>
    edge_mask <span class="token operator">=</span> edges <span class="token operator">></span> edge_threshold
    
    <span class="token comment"># Step 4: Posterize (reduce colors)</span>
    posterized <span class="token operator">=</span> <span class="token punctuation">(</span>smoothed <span class="token operator">//</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">50</span>
    
    <span class="token comment"># Step 5: Combine</span>
    result <span class="token operator">=</span> posterized<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    result<span class="token punctuation">[</span>edge_mask<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># Black edges</span>
    
    <span class="token keyword">return</span> result</code>`),m(v),B(12),W(e,s)}const ks=Object.freeze(Object.defineProperty({__proto__:null,default:Vn,metadata:fn},Symbol.toStringTag,{value:"Module"})),gn={title:"Shaders 101: How They Transform Your Graphics",date:"2025-02-01",author:"Andrey Golovin",category:"graphics",tags:["shaders","webgl","glsl"],published:!0,featured:!0,excerpt:"A comprehensive guide to understanding shaders, from vertex to fragment processing, with interactive examples and real-world applications.",readingTime:15},{title:ds,date:ms,author:fs,category:gs,tags:hs,published:ys,featured:vs,excerpt:ws,readingTime:bs}=gn;var Gn=H('<h1 id="shaders-101-how-they-transform-your-graphics">Shaders 101: How They Transform Your Graphics</h1> <h2 id="what-are-shaders">What Are Shaders?</h2> <p>Shaders are specialized programs that run on your GPU to calculate rendering effects on a per-pixel (fragment shader) or per-vertex (vertex shader) basis. They’re the secret sauce behind stunning graphics in games, web applications, and creative projects.</p> <p>Think of a shader as a function that gets called millions of times per frame—once for every pixel or vertex on screen.</p> <h2 id="the-shader-pipeline">The Shader Pipeline</h2> <h2 id="vertex-shaders">Vertex Shaders</h2> <p>Vertex shaders process each vertex of your geometry independently.</p> <h3 id="basic-vertex-shader-example">Basic Vertex Shader Example</h3> <pre class="language-glsl"><!></pre> <h3 id="common-vertex-operations">Common Vertex Operations</h3> <pre class="language-glsl"><!></pre> <h2 id="fragment-shaders">Fragment Shaders</h2> <p>Fragment shaders determine the color of each pixel. This is where the visual magic happens.</p> <h3 id="basic-fragment-shader">Basic Fragment Shader</h3> <pre class="language-glsl"><!></pre> <h3 id="creative-fragment-effects">Creative Fragment Effects</h3> <h4 id="1-animated-gradient">1. Animated Gradient</h4> <pre class="language-glsl"><!></pre> <h4 id="2-voronoi-noise">2. Voronoi Noise</h4> <pre class="language-glsl"><!></pre> <h4 id="3-procedural-marble">3. Procedural Marble</h4> <pre class="language-glsl"><!></pre> <h2 id="implementing-shaders-in-webglthreejs">Implementing Shaders in WebGL/Three.js</h2> <h3 id="using-threejs-shadermaterial">Using Three.js ShaderMaterial</h3> <pre class="language-javascript"><!></pre> <h2 id="common-shader-patterns">Common Shader Patterns</h2> <h3 id="1-uv-manipulation">1. UV Manipulation</h3> <pre class="language-glsl"><!></pre> <h3 id="2-lighting-models">2. Lighting Models</h3> <pre class="language-glsl"><!></pre> <h3 id="3-displacement-mapping">3. Displacement Mapping</h3> <pre class="language-glsl"><!></pre> <h2 id="performance-tips">Performance Tips</h2> <ol><li><strong>Minimize branching</strong> - Conditionals are expensive on GPUs</li> <li><strong>Use vec4 operations</strong> - Take advantage of parallel processing</li> <li><strong>Avoid expensive functions</strong> - sin, cos are relatively slow</li> <li><strong>Pre-compute when possible</strong> - Calculate outside shader, pass as uniform</li> <li><strong>Use appropriate precision</strong> - <code>lowp</code> for mobile, <code>mediump</code> for mid-range</li></ol> <h2 id="common-mistakes-to-avoid">Common Mistakes to Avoid</h2> <pre class="language-glsl"><!></pre> <h2 id="debugging-shaders">Debugging Shaders</h2> <pre class="language-glsl"><!></pre> <h2 id="next-steps">Next Steps</h2> <ul><li>Explore shadertoy.com for inspiration</li> <li>Learn Signed Distance Fields (SDFs) for ray marching</li> <li>Experiment with post-processing effects</li> <li>Study advanced techniques like parallax mapping and normal mapping</li></ul> <hr/> <p><em>Have you created interesting shaders? Share your experiments in the comments below!</em></p>',1);function Ln(e){var s=Gn(),n=k(Z(s),16),u=d(n);f(u,()=>`<code class="language-glsl"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">version</span> <span class="token expression"><span class="token number">300</span> es</span></span>

<span class="token keyword">in</span> <span class="token keyword">vec3</span> position<span class="token punctuation">;</span>
<span class="token keyword">in</span> <span class="token keyword">vec3</span> normal<span class="token punctuation">;</span>

<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> uMatrix<span class="token punctuation">;</span>
<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> uNormalMatrix<span class="token punctuation">;</span>

<span class="token keyword">out</span> <span class="token keyword">vec3</span> vNormal<span class="token punctuation">;</span>
<span class="token keyword">out</span> <span class="token keyword">vec3</span> vPosition<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Transform vertex position</span>
    <span class="token keyword">vec4</span> worldPosition <span class="token operator">=</span> uMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl_Position <span class="token operator">=</span> worldPosition<span class="token punctuation">;</span>
    
    <span class="token comment">// Transform normal for lighting</span>
    vNormal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>uNormalMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vPosition <span class="token operator">=</span> worldPosition<span class="token punctuation">.</span>xyz<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(n);var l=k(n,4),g=d(l);f(g,()=>`<code class="language-glsl"><span class="token comment">// Wave deformation</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec3</span> pos <span class="token operator">=</span> position<span class="token punctuation">;</span>
    pos<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token function">sin</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>x <span class="token operator">+</span> uTime<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
    gl_Position <span class="token operator">=</span> uMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Vertex displacement along normal</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec3</span> displaced <span class="token operator">=</span> position <span class="token operator">+</span> normal <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>uTime<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
    gl_Position <span class="token operator">=</span> uMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>displaced<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Procedural animation</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec3</span> pos <span class="token operator">=</span> position<span class="token punctuation">;</span>
    <span class="token keyword">float</span> wave <span class="token operator">=</span> <span class="token function">sin</span><span class="token punctuation">(</span>uTime <span class="token operator">+</span> pos<span class="token punctuation">.</span>z <span class="token operator">*</span> <span class="token number">5.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">;</span>
    pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> wave<span class="token punctuation">;</span>
    gl_Position <span class="token operator">=</span> uMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(l);var t=k(l,8),h=d(t);f(h,()=>`<code class="language-glsl"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">version</span> <span class="token expression"><span class="token number">300</span> es</span></span>
<span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>

<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> uTexture<span class="token punctuation">;</span>
<span class="token keyword">uniform</span> <span class="token keyword">float</span> uTime<span class="token punctuation">;</span>

<span class="token keyword">in</span> <span class="token keyword">vec2</span> vUv<span class="token punctuation">;</span>
<span class="token keyword">in</span> <span class="token keyword">vec3</span> vNormal<span class="token punctuation">;</span>

<span class="token keyword">out</span> <span class="token keyword">vec4</span> outColor<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec3</span> normal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>vNormal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Simple lighting</span>
    <span class="token keyword">vec3</span> lightDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> light <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> lightDir<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Sample texture</span>
    <span class="token keyword">vec4</span> texColor <span class="token operator">=</span> <span class="token function">texture</span><span class="token punctuation">(</span>uTexture<span class="token punctuation">,</span> vUv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Combine</span>
    outColor <span class="token operator">=</span> texColor <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>light<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(t);var i=k(t,6),b=d(i);f(b,()=>`<code class="language-glsl"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec2</span> uv <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy <span class="token operator">/</span> iResolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span>
    <span class="token keyword">vec3</span> color <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>iTime <span class="token operator">+</span> uv<span class="token punctuation">.</span>xyx <span class="token operator">+</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    outColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(i);var c=k(i,4),_=d(c);f(_,()=>`<code class="language-glsl"><span class="token keyword">float</span> <span class="token function">voronoi</span><span class="token punctuation">(</span><span class="token keyword">vec2</span> uv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec2</span> iuv <span class="token operator">=</span> <span class="token function">floor</span><span class="token punctuation">(</span>uv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">vec2</span> fuv <span class="token operator">=</span> <span class="token function">fract</span><span class="token punctuation">(</span>uv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">float</span> minDist <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
    
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> y <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">vec2</span> neighbor <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">vec2</span> point <span class="token operator">=</span> <span class="token function">sin</span><span class="token punctuation">(</span>iuv <span class="token operator">+</span> neighbor<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
            <span class="token keyword">float</span> dist <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>fuv <span class="token operator">-</span> neighbor <span class="token operator">-</span> point<span class="token punctuation">)</span><span class="token punctuation">;</span>
            minDist <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>minDist<span class="token punctuation">,</span> dist<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">return</span> minDist<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec2</span> uv <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy <span class="token operator">/</span> iResolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span>
    <span class="token keyword">float</span> v <span class="token operator">=</span> <span class="token function">voronoi</span><span class="token punctuation">(</span>uv <span class="token operator">*</span> <span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    outColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(c);var x=k(c,4),A=d(x);f(A,()=>`<code class="language-glsl"><span class="token keyword">float</span> <span class="token function">noise</span><span class="token punctuation">(</span><span class="token keyword">vec2</span> uv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">sin</span><span class="token punctuation">(</span>uv<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">10.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>uv<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec2</span> uv <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy <span class="token operator">/</span> iResolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span>
    
    <span class="token keyword">float</span> n <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">float</span> freq <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        n <span class="token operator">+=</span> <span class="token function">noise</span><span class="token punctuation">(</span>uv <span class="token operator">*</span> freq<span class="token punctuation">)</span> <span class="token operator">/</span> freq<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">float</span> pattern <span class="token operator">=</span> <span class="token function">sin</span><span class="token punctuation">(</span>uv<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">10.0</span> <span class="token operator">+</span> n <span class="token operator">*</span> <span class="token number">5.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
    outColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(x);var p=k(x,6),y=d(p);f(y,()=>`<code class="language-javascript"><span class="token keyword">const</span> vertexShader <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
    varying vec2 vUv;
    
    void main() &#123;
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    &#125;
</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fragmentShader <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
    uniform float uTime;
    varying vec2 vUv;
    
    void main() &#123;
        vec3 color = 0.5 + 0.5 * cos(uTime + vUv.xyx + vec3(0, 2, 4));
        gl_FragColor = vec4(color, 1.0);
    &#125;
</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ShaderMaterial</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    vertexShader<span class="token punctuation">,</span>
    fragmentShader<span class="token punctuation">,</span>
    uniforms<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        uTime<span class="token operator">:</span> <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Update uniforms in animation loop</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    material<span class="token punctuation">.</span>uniforms<span class="token punctuation">.</span>uTime<span class="token punctuation">.</span>value <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.001</span><span class="token punctuation">;</span>
    renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(p);var o=k(p,6),w=d(o);f(w,()=>`<code class="language-glsl"><span class="token comment">// Tile pattern</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec2</span> uv <span class="token operator">=</span> <span class="token function">fract</span><span class="token punctuation">(</span>vUv <span class="token operator">*</span> <span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    outColor <span class="token operator">=</span> <span class="token function">texture</span><span class="token punctuation">(</span>uTexture<span class="token punctuation">,</span> uv<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Radial coordinates</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec2</span> center <span class="token operator">=</span> vUv <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> angle <span class="token operator">=</span> <span class="token function">atan</span><span class="token punctuation">(</span>center<span class="token punctuation">.</span>y<span class="token punctuation">,</span> center<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> dist <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span><span class="token punctuation">;</span>
    outColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>angle <span class="token operator">/</span> <span class="token number">6.28</span><span class="token punctuation">,</span> dist<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(o);var v=k(o,4),P=d(v);f(P,()=>`<code class="language-glsl"><span class="token comment">// Phong lighting</span>
<span class="token keyword">vec3</span> <span class="token function">phong</span><span class="token punctuation">(</span><span class="token keyword">vec3</span> normal<span class="token punctuation">,</span> <span class="token keyword">vec3</span> lightDir<span class="token punctuation">,</span> <span class="token keyword">vec3</span> viewDir<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Ambient</span>
    <span class="token keyword">vec3</span> ambient <span class="token operator">=</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Diffuse</span>
    <span class="token keyword">float</span> diff <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> lightDir<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">vec3</span> diffuse <span class="token operator">=</span> diff <span class="token operator">*</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Specular</span>
    <span class="token keyword">vec3</span> reflectDir <span class="token operator">=</span> <span class="token function">reflect</span><span class="token punctuation">(</span><span class="token operator">-</span>lightDir<span class="token punctuation">,</span> normal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> spec <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>viewDir<span class="token punctuation">,</span> reflectDir<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">32.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">vec3</span> specular <span class="token operator">=</span> spec <span class="token operator">*</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> ambient <span class="token operator">+</span> diffuse <span class="token operator">+</span> specular<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(v);var S=k(v,4),C=d(S);f(C,()=>`<code class="language-glsl"><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> uDisplacement<span class="token punctuation">;</span>
<span class="token keyword">uniform</span> <span class="token keyword">float</span> uStrength<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">vec4</span> displacement <span class="token operator">=</span> <span class="token function">texture</span><span class="token punctuation">(</span>uDisplacement<span class="token punctuation">,</span> vUv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">vec3</span> newPos <span class="token operator">=</span> position <span class="token operator">+</span> normal <span class="token operator">*</span> displacement<span class="token punctuation">.</span>r <span class="token operator">*</span> uStrength<span class="token punctuation">;</span>
    gl_Position <span class="token operator">=</span> projectionMatrix <span class="token operator">*</span> modelViewMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>newPos<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(S);var a=k(S,8),r=d(a);f(r,()=>`<code class="language-glsl"><span class="token comment">// ❌ SLOW: Loop with dynamic iterations</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">int</span><span class="token punctuation">(</span>uCount<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span>

<span class="token comment">// ✅ FAST: Fixed loop count</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span>

<span class="token comment">// ❌ SLOW: Complex branching</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>condition1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>condition2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span>

<span class="token comment">// ✅ FAST: Use mix() and step() functions</span>
<span class="token keyword">float</span> result <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">step</span><span class="token punctuation">(</span>threshold<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ❌ SLOW: Recalculating same value</span>
<span class="token keyword">float</span> val1 <span class="token operator">=</span> <span class="token function">expensive_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> val2 <span class="token operator">=</span> <span class="token function">expensive_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ FAST: Calculate once, reuse</span>
<span class="token keyword">float</span> val <span class="token operator">=</span> <span class="token function">expensive_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> val1 <span class="token operator">=</span> val<span class="token punctuation">;</span>
<span class="token keyword">float</span> val2 <span class="token operator">=</span> val<span class="token punctuation">;</span></code>`),m(a);var T=k(a,4),j=d(T);f(j,()=>`<code class="language-glsl"><span class="token comment">// Visualize normals</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    outColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>vNormal <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Visualize UVs</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    outColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>vUv<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Show depth</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    outColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>gl_FragCoord<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Checkerboard for debugging</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">float</span> checker <span class="token operator">=</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>vUv<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">10.0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">floor</span><span class="token punctuation">(</span>vUv<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    outColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>checker<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(T),B(8),W(e,s)}const _s=Object.freeze(Object.defineProperty({__proto__:null,default:Ln,metadata:gn},Symbol.toStringTag,{value:"Module"})),hn={title:"Functional Programming: Simple Concepts, Powerful Results",date:"2025-02-15",author:"Andrey Golovin",category:"programming",tags:["functional-programming","javascript","best-practices"],published:!0,featured:!1,excerpt:"Discover how functional programming paradigms can simplify your code and make debugging easier. We'll compare imperative vs functional approaches with real examples.",readingTime:14},{title:xs,date:Cs,author:Ts,category:Ss,tags:Ps,published:As,featured:Es,excerpt:Ds,readingTime:Rs}=hn;var Yn=H('<h1 id="functional-programming-simple-concepts-powerful-results">Functional Programming: Simple Concepts, Powerful Results</h1> <h2 id="why-functional-programming">Why Functional Programming?</h2> <p>In a world of increasingly complex applications, functional programming offers a refreshing approach: <strong>write functions that do one thing, do it well, and compose them together</strong>.</p> <p>The benefits:</p> <ul><li>Easier to test (pure functions have predictable outputs)</li> <li>Easier to reason about (no hidden state mutations)</li> <li>Better code reuse (composable functions)</li> <li>Natural parallelization (no shared mutable state)</li></ul> <h2 id="core-concepts">Core Concepts</h2> <h3 id="1-pure-functions">1. Pure Functions</h3> <p>A pure function always returns the same output for the same input and has no side effects.</p> <pre class="language-javascript"><!></pre> <h3 id="2-immutability">2. Immutability</h3> <p>Data never changes; instead, you create new versions with changes applied.</p> <pre class="language-javascript"><!></pre> <h3 id="3-first-class-functions">3. First-Class Functions</h3> <p>Functions are treated as values—pass them around, return them, store them.</p> <pre class="language-javascript"><!></pre> <h3 id="4-function-composition">4. Function Composition</h3> <p>Combine simple functions into complex operations.</p> <pre class="language-javascript"><!></pre> <h2 id="real-world-examples">Real-World Examples</h2> <h3 id="data-transformation-pipeline">Data Transformation Pipeline</h3> <pre class="language-javascript"><!></pre> <h3 id="error-handling-with-monads">Error Handling with Monads</h3> <pre class="language-javascript"><!></pre> <h3 id="currying-and-partial-application">Currying and Partial Application</h3> <pre class="language-javascript"><!></pre> <h2 id="immutable-data-structures">Immutable Data Structures</h2> <pre class="language-javascript"><!></pre> <h2 id="avoiding-common-pitfalls">Avoiding Common Pitfalls</h2> <pre class="language-javascript"><!></pre> <h2 id="functional-javascript-patterns-in-practice">Functional JavaScript Patterns in Practice</h2> <h3 id="redux--state-management">Redux / State Management</h3> <pre class="language-javascript"><!></pre> <h3 id="react-with-functional-patterns">React with Functional Patterns</h3> <pre class="language-javascript"><!></pre> <h2 id="conclusion">Conclusion</h2> <p>Functional programming isn’t about using <code>map</code>, <code>filter</code>, and <code>reduce</code> everywhere. It’s about:</p> <ol><li><strong>Thinking in transformations</strong> - data flows through functions</li> <li><strong>Avoiding side effects</strong> - pure functions are predictable</li> <li><strong>Composing small pieces</strong> - complex logic from simple building blocks</li> <li><strong>Embracing immutability</strong> - no hidden state changes</li></ol> <p>Start small: write pure functions, use <code>const</code>, and compose where it makes sense. You don’t need to go all-in functional to reap the benefits.</p> <h3 id="further-resources">Further Resources</h3> <ul><li>“Composing Software” by Eric Elliott</li> <li>RxJS for reactive functional programming</li> <li>Ramda.js for functional utilities</li> <li>Clojure/Haskell to learn “pure” functional languages</li></ul> <hr/> <p><em>How do you use functional programming in your projects? Share your patterns in the comments!</em></p>',1);function Jn(e){var s=Yn(),n=k(Z(s),16),u=d(n);f(u,()=>`<code class="language-javascript"><span class="token comment">// ❌ IMPURE: depends on external state</span>
<span class="token keyword">let</span> multiplier <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> multiplier<span class="token punctuation">;</span>  <span class="token comment">// multiplier could change!</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// ✅ PURE: all inputs as parameters</span>
<span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> multiplier</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> multiplier<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// ❌ IMPURE: modifies external state</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">incrementAge</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    user<span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">// mutation!</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// ✅ PURE: returns new object</span>
<span class="token keyword">function</span> <span class="token function">incrementAge</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>user<span class="token punctuation">,</span> age<span class="token operator">:</span> user<span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(n);var l=k(n,6),g=d(l);f(g,()=>`<code class="language-javascript"><span class="token comment">// Arrays</span>
<span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> modified <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>original<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// [1, 2, 3, 4]</span>
<span class="token keyword">const</span> removed <span class="token operator">=</span> original<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">!==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [1, 3]</span>

<span class="token comment">// Objects</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">25</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> olderPerson <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>person<span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">26</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Never: person.age = 26  (mutation!)</span>

<span class="token comment">// Deep immutability</span>
<span class="token keyword">const</span> nested <span class="token operator">=</span> <span class="token punctuation">&#123;</span> user<span class="token operator">:</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Bob'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> updated <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>nested<span class="token punctuation">,</span>
    user<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>nested<span class="token punctuation">.</span>user<span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Charlie'</span> <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>`),m(l);var t=k(l,6),h=d(t);f(h,()=>`<code class="language-javascript"><span class="token comment">// Functions as arguments (callbacks, higher-order functions)</span>
<span class="token keyword">function</span> <span class="token function">applyTwice</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">applyTwice</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 20</span>

<span class="token comment">// Returning functions</span>
<span class="token keyword">function</span> <span class="token function">makeAdder</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token parameter">y</span> <span class="token operator">=></span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> add5 <span class="token operator">=</span> <span class="token function">makeAdder</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add5</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 8</span>

<span class="token comment">// Higher-order functions</span>
<span class="token keyword">function</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">predicate<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>predicate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`),m(t);var i=k(t,6),b=d(i);f(b,()=>`<code class="language-javascript"><span class="token comment">// The compose utility</span>
<span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token parameter">x</span> <span class="token operator">=></span> fns<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fn</span><span class="token punctuation">(</span>acc<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Building blocks</span>
<span class="token keyword">const</span> <span class="token function-variable function">double</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">addOne</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">square</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>

<span class="token comment">// Compose them</span>
<span class="token keyword">const</span> operation <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>square<span class="token punctuation">,</span> addOne<span class="token punctuation">,</span> double<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">operation</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// square(addOne(double(3))) = square(addOne(6)) = square(7) = 49</span>

<span class="token comment">// Pipe (left-to-right, more readable)</span>
<span class="token keyword">function</span> <span class="token function">pipe</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token parameter">x</span> <span class="token operator">=></span> fns<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fn</span><span class="token punctuation">(</span>acc<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> operation2 <span class="token operator">=</span> <span class="token function">pipe</span><span class="token punctuation">(</span>double<span class="token punctuation">,</span> addOne<span class="token punctuation">,</span> square<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">operation2</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ((3 * 2) + 1) ^ 2 = 49</span></code>`),m(i);var c=k(i,6),_=d(c);f(_,()=>`<code class="language-javascript"><span class="token comment">// Typical imperative approach</span>
<span class="token keyword">function</span> <span class="token function">processUsers</span><span class="token punctuation">(</span><span class="token parameter">users</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> users<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> user <span class="token operator">=</span> users<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>age <span class="token operator">>=</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> processed <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
                <span class="token operator">...</span>user<span class="token punctuation">,</span>
                name<span class="token operator">:</span> user<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                category<span class="token operator">:</span> user<span class="token punctuation">.</span>age <span class="token operator">></span> <span class="token number">65</span> <span class="token operator">?</span> <span class="token string">'senior'</span> <span class="token operator">:</span> <span class="token string">'adult'</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>processed<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Functional approach</span>
<span class="token keyword">const</span> <span class="token function-variable function">isAdult</span> <span class="token operator">=</span> <span class="token parameter">user</span> <span class="token operator">=></span> user<span class="token punctuation">.</span>age <span class="token operator">>=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">categorizeAge</span> <span class="token operator">=</span> <span class="token parameter">user</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>user<span class="token punctuation">,</span>
    category<span class="token operator">:</span> user<span class="token punctuation">.</span>age <span class="token operator">></span> <span class="token number">65</span> <span class="token operator">?</span> <span class="token string">'senior'</span> <span class="token operator">:</span> <span class="token string">'adult'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">uppercaseName</span> <span class="token operator">=</span> <span class="token parameter">user</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>user<span class="token punctuation">,</span>
    name<span class="token operator">:</span> user<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> processUsers <span class="token operator">=</span> <span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isAdult<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>uppercaseName<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>categorizeAge<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Or chained:</span>
<span class="token keyword">const</span> <span class="token function-variable function">processUsers</span> <span class="token operator">=</span> <span class="token parameter">users</span> <span class="token operator">=></span>
    users
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isAdult<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>uppercaseName<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>categorizeAge<span class="token punctuation">)</span><span class="token punctuation">;</span></code>`),m(c);var x=k(c,4),A=d(x);f(A,()=>`<code class="language-javascript"><span class="token comment">// Simple Result monad</span>
<span class="token keyword">class</span> <span class="token class-name">Result</span> <span class="token punctuation">&#123;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> isError <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isError <span class="token operator">=</span> isError<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">static</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">static</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isError <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isError <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token function">getOrElse</span><span class="token punctuation">(</span><span class="token parameter">defaultValue</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isError <span class="token operator">?</span> defaultValue <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Usage</span>
<span class="token keyword">const</span> <span class="token function-variable function">divideBy</span> <span class="token operator">=</span> <span class="token parameter">divisor</span> <span class="token operator">=></span> <span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>divisor <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Division by zero'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>value <span class="token operator">/</span> divisor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token function">divideBy</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token function">divideBy</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">getOrElse</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 7.5</span>

<span class="token comment">// With error</span>
<span class="token keyword">const</span> badResult <span class="token operator">=</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token function">divideBy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// error!</span>
    <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token function">divideBy</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// skipped</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>badResult<span class="token punctuation">.</span><span class="token function">getOrElse</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0</span></code>`),m(x);var p=k(x,4),y=d(p);f(y,()=>`<code class="language-javascript"><span class="token comment">// Currying: function takes one argument, returns function waiting for next</span>
<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">curried</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">>=</span> fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>nextArgs</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">curried</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>nextArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token keyword">const</span> curriedAdd <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">curriedAdd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 6</span>
<span class="token function">curriedAdd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 6</span>
<span class="token function">curriedAdd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 6</span>

<span class="token comment">// Practical: API request builder</span>
<span class="token keyword">const</span> fetchUser <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">baseUrl<span class="token punctuation">,</span> userId<span class="token punctuation">,</span> token</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>baseUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/users/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>userId<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
        headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>token<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fetchFromApi <span class="token operator">=</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fetchUser123 <span class="token operator">=</span> <span class="token function">fetchFromApi</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">fetchUser123</span><span class="token punctuation">(</span><span class="token string">'my-token'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`),m(p);var o=k(p,4),w=d(o);f(w,()=>`<code class="language-javascript"><span class="token comment">// Using Immer for immutability</span>
<span class="token keyword">import</span> produce <span class="token keyword">from</span> <span class="token string">'immer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    users<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> posts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'Hello'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Clean, readable mutation-like syntax</span>
<span class="token comment">// Immer ensures immutability under the hood</span>
<span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token function">produce</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token parameter">draft</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    draft<span class="token punctuation">.</span>users<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'World'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state <span class="token operator">===</span> newState<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false (new object)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>users<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> newState<span class="token punctuation">.</span>users<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span></code>`),m(o);var v=k(o,4),P=d(v);f(P,()=>`<code class="language-javascript"><span class="token comment">// ❌ Don't: overly nested compositions</span>
<span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">+</span> b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ Do: break it into readable steps</span>
<span class="token keyword">const</span> <span class="token function-variable function">filterLarge</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">doubleAll</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">+</span> b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pipeline <span class="token operator">=</span> <span class="token function">pipe</span><span class="token punctuation">(</span>filterLarge<span class="token punctuation">,</span> doubleAll<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ❌ Don't: lose context with arrow functions</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ✅ works due to arrow fn</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// ❌ Don't: forget that FP still needs statements</span>
<span class="token keyword">const</span> <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'big'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">'small'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ Do: or use ternary for simple cases</span>
<span class="token keyword">const</span> <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">></span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">'big'</span> <span class="token operator">:</span> <span class="token string">'small'</span><span class="token punctuation">;</span></code>`),m(v);var S=k(v,6),C=d(S);f(C,()=>`<code class="language-javascript"><span class="token comment">// Pure reducer</span>
<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">&#123;</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">counterReducer</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">case</span> <span class="token string">'INCREMENT'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'ADD'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Composable action creators</span>
<span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> type<span class="token operator">:</span> <span class="token string">'INCREMENT'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">payload</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> type<span class="token operator">:</span> <span class="token string">'ADD'</span><span class="token punctuation">,</span> payload <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`),m(S);var a=k(S,4),r=d(a);f(r,()=>`<code class="language-javascript"><span class="token comment">// Composition over inheritance</span>
<span class="token keyword">const</span> <span class="token function-variable function">withLogging</span> <span class="token operator">=</span> <span class="token parameter">Component</span> <span class="token operator">=></span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Mounted: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>Component<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">&#123;</span><span class="token operator">...</span>props<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Pure components are naturally testable</span>
<span class="token keyword">const</span> <span class="token function-variable function">UserCard</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> user<span class="token punctuation">,</span> onDelete <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">&#123;</span>user<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">onDelete</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Testing is trivial</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'calls onDelete when clicked'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> mock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>UserCard user<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Test'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> onDelete<span class="token operator">=</span><span class="token punctuation">&#123;</span>mock<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fireEvent<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">'Delete'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>mock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`),m(a),B(16),W(e,s)}const js=Object.freeze(Object.defineProperty({__proto__:null,default:Jn,metadata:hn},Symbol.toStringTag,{value:"Module"})),yn={title:"New Beginnings: Why I Rewrote My Portfolio",date:"2025-02-20",author:"Andrey Golovin",category:"meta",tags:["portfolio","web-development","svelte","threejs"],published:!0,featured:!0,excerpt:"Behind the scenes: the journey of redesigning this portfolio from scratch, lessons learned, and what's coming next.",readingTime:10},{title:Ms,date:Fs,author:Us,category:Is,tags:$s,published:zs,featured:Ns,excerpt:Os,readingTime:qs}=yn;var Xn=H('<h1 id="new-beginnings-why-i-rewrote-my-portfolio">New Beginnings: Why I Rewrote My Portfolio</h1> <h2 id="the-old-portfolio">The Old Portfolio</h2> <h3 id="was-such-a-designer-webiste">Was such a designer webiste<br/></h3> <ul><li>some</li> <li>other</li> <li>point</li> <li>really</li></ul> <p>Was such a designer webiste<br/></p> <hr/> <h3 id="the-new-portfolio">The New Portfolio</h3> <p>Is more optimized for a blog<br/> themed like comfortable reader theme with a little 3d effect<br/></p> <hr/> <h3 id="the-new-portfolio-1">The New Portfolio</h3> <p>Is more optimized for a blog<br/> themed like comfortable reader theme with a little 3d effect<br/></p> <br/>',1);function Kn(e){var s=Xn();B(22),W(e,s)}const Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Kn,metadata:yn},Symbol.toStringTag,{value:"Module"}));export{Bs as _,js as a,_s as b,ks as c,as as e,ss as i};
